# 人员管理功能开发文档

## 1. 功能概述

人员管理模块用于管理注塑部门的员工信息，包括员工基本信息、部门组织架构、员工档案等。

## 2. 功能需求

### 2.1 员工列表查询
- 支持分页查询
- 支持按姓名、工号、部门、状态筛选
- 显示员工基本信息

### 2.2 员工信息管理
- 员工新增、编辑、删除
- 工号唯一性校验
- 必填字段：姓名、工号、部门
- 可选字段：性别、年龄、手机号、邮箱、入职日期等

### 2.3 部门管理
- 部门列表查询
- 部门新增、编辑、删除
- 部门树形结构

### 2.4 员工档案
- 员工详细信息查看
- 员工履历记录
- 员工培训记录

## 3. 数据库设计

### 3.1 部门表（sys_department）

```sql
CREATE TABLE `sys_department` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  `parent_id` bigint DEFAULT 0 COMMENT '父部门ID，0表示顶级',
  `dept_name` varchar(50) NOT NULL COMMENT '部门名称',
  `dept_code` varchar(50) DEFAULT NULL COMMENT '部门编码',
  `leader` varchar(50) DEFAULT NULL COMMENT '部门负责人',
  `phone` varchar(20) DEFAULT NULL COMMENT '联系电话',
  `email` varchar(100) DEFAULT NULL COMMENT '邮箱',
  `sort_order` int DEFAULT 0 COMMENT '排序',
  `status` tinyint DEFAULT 1 COMMENT '状态：0-禁用，1-启用',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `deleted` tinyint DEFAULT 0 COMMENT '删除标志：0-未删除，1-已删除',
  PRIMARY KEY (`id`),
  KEY `idx_parent_id` (`parent_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='部门表';
```

### 3.2 员工表（employee）

```sql
CREATE TABLE `employee` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  `employee_no` varchar(50) NOT NULL COMMENT '工号',
  `name` varchar(50) NOT NULL COMMENT '姓名',
  `gender` tinyint DEFAULT NULL COMMENT '性别：0-女，1-男',
  `age` int DEFAULT NULL COMMENT '年龄',
  `phone` varchar(20) DEFAULT NULL COMMENT '手机号',
  `email` varchar(100) DEFAULT NULL COMMENT '邮箱',
  `department_id` bigint NOT NULL COMMENT '部门ID',
  `position` varchar(50) DEFAULT NULL COMMENT '职位',
  `entry_date` date DEFAULT NULL COMMENT '入职日期',
  `status` tinyint DEFAULT 1 COMMENT '状态：0-离职，1-在职',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `deleted` tinyint DEFAULT 0 COMMENT '删除标志：0-未删除，1-已删除',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_employee_no` (`employee_no`),
  KEY `idx_department_id` (`department_id`),
  KEY `idx_status` (`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='员工表';
```

## 4. 后端开发要点

### 4.1 实体类设计
- Employee实体类
- Department实体类
- 使用MyBatis-Plus注解

### 4.2 Service层
- 员工CRUD操作
- 部门树形结构查询
- 工号唯一性校验
- 逻辑删除

### 4.3 Controller层
- RESTful API设计
- 统一响应格式
- 参数校验

## 5. 前端开发要点

### 5.1 员工列表页面
- 查询表单
- 数据表格
- 分页组件
- 新增/编辑/删除操作

### 5.2 员工表单
- 表单验证
- 部门选择（树形选择器）
- 日期选择器

### 5.3 部门管理
- 部门树形展示
- 部门CRUD操作

## 6. 注意事项

1. 工号必须唯一
2. 删除员工使用逻辑删除
3. 部门采用树形结构
4. 删除部门前检查是否有关联员工
5. 员工状态：0-离职，1-在职
