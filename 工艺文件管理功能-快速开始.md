# 注塑工艺文件管理功能 - 快速开始指南

## 🚀 5分钟快速启动

### 第一步：启动后端服务

```bash
cd /Users/czd/zssystem/backend
mvn spring-boot:run
```

等待看到：
```
Started ZssystemApplication in X.XXX seconds
```

### 第二步：启动前端服务

```bash
cd /Users/czd/zssystem/frontend
npm run dev
```

### 第三步：访问系统

打开浏览器访问：**http://localhost:5173**

---

## 📍 功能入口

### 菜单路径
```
生产管理
  ├── 生产订单
  ├── 工艺文件管理 ⭐
  └── 待我审批 ⭐
```

### 页面路径
| 功能 | URL |
|------|-----|
| 工艺文件列表 | `/production/process-file` |
| 上传工艺文件 | `/production/process-file/upload` |
| 查看详情 | `/production/process-file/detail/:id` |
| 待我审批 | `/production/process-file/pending-approval` |

---

## 👤 操作指南

### 注塑组长：上传工艺文件

1. 点击"生产管理" → "工艺文件管理"
2. 点击"上传工艺文件"按钮
3. 选择设备
4. 拖拽或点击上传Excel文件（.xls/.xlsx，最大10MB）
5. 填写备注信息（可选）
6. 点击"上传"
7. 在列表中找到文件，点击"提交"按钮

### 审批人员：审批工艺文件

1. 点击"生产管理" → "待我审批"
2. 查看待审批文件列表
3. 点击"审批"按钮进入详情页
4. 查看文件信息和审批历史
5. 点击"审批"按钮
6. 选择"通过"或"驳回"
7. 填写审批意见（驳回时必填）
8. 确认提交

### 所有用户：查看和下载

1. 进入"工艺文件管理"
2. 使用查询条件筛选文件
3. 点击"查看"查看详情
4. 点击"下载"下载文件

---

## 🔑 核心功能

### ✅ 3级审批流程
```
草稿 → 车间主任审核 → 注塑部经理会签 → 生产技术部经理批准 → 已批准
```

### ✅ 版本管理
- 修改文件自动生成新版本（V1.0 → V2.0）
- 历史版本完整保留
- 支持查看和下载历史版本

### ✅ 文件编号
- 自动生成唯一编号
- 格式：PF20260124001

### ✅ 权限控制
- 注塑组长：上传、修改、提交
- 车间主任：第1级审核
- 注塑部经理：第2级会签
- 生产技术部经理：第3级批准、作废

---

## 🛠️ 常见问题

### Q1: 为什么无法上传文件？
**A**: 请检查：
- 文件格式是否为.xls或.xlsx
- 文件大小是否小于10MB
- 是否选择了设备
- 是否有上传权限（注塑组长）

### Q2: 为什么无法审批？
**A**: 请检查：
- 您的角色是否有审批权限
- 文件是否处于您可审批的状态
- 是否已经审批过该文件

### Q3: 如何修改已上传的工艺文件？
**A**: 
1. 找到要修改的文件
2. 点击"查看"进入详情页
3. 如果是创建人且文件状态为草稿，可以修改
4. 修改会生成新版本，需填写变更原因

### Q4: 驳回后如何重新提交？
**A**: 
1. 文件被驳回后会变为"已驳回"状态
2. 创建人可以修改文件
3. 重新提交后会再次进入审批流程

---

## 📊 状态说明

| 状态 | 颜色 | 说明 |
|------|------|------|
| 草稿 | 灰色 | 未提交审批 |
| 待车间主任审核 | 蓝色 | 第1级审批中 |
| 待注塑部经理会签 | 蓝色 | 第2级审批中 |
| 待生产技术部经理批准 | 蓝色 | 第3级审批中 |
| 已批准（生效中） | 绿色 | 审批通过，已生效 |
| 已驳回 | 红色 | 审批未通过 |
| 已作废 | 灰色 | 文件作废 |

---

## 📝 注意事项

### ⚠️ 文件要求
- 仅支持Excel格式（.xls, .xlsx）
- 文件大小不超过10MB
- 每台设备至少需要4个工艺文件

### ⚠️ 审批要求
- 驳回时必须填写审批意见
- 审批按顺序进行，不可跳级
- 审批后不可撤销

### ⚠️ 修改要求
- 修改文件必须填写变更原因
- 修改会生成新版本
- 只能修改当前版本

---

## 🎯 系统特色

✅ **操作简单** - 界面友好，流程清晰  
✅ **安全可靠** - 权限控制，审批流程完善  
✅ **版本管理** - 历史版本完整保留  
✅ **审批追溯** - 审批历史可查询  
✅ **文件安全** - 类型和大小验证  

---

## 📚 更多文档

- **完整功能文档**: `12-注塑工艺文件管理功能开发文档.md`（3,617行）
- **最终交付报告**: `注塑工艺文件管理功能-最终交付报告.md`
- **优化总结**: `工艺文件管理功能优化总结.md`
- **开发总结**: `工艺文件管理功能开发总结.md`

---

## 🆘 获取帮助

遇到问题？
1. 查看完整功能文档
2. 查看API文档：http://localhost:8080/doc.html
3. 查看开发指南：`.cursor/skills/zssystem-development-guide/SKILL.md`

---

**🎉 开始使用吧！**

**版本**: V1.1  
**更新日期**: 2026-01-24
